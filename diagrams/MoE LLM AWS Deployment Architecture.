digraph {
	rankdir=TB
	node [fontname=Arial shape=record]
	edge [fontname=Arial fontsize=10]
	graph [ranksep=0.5]
	AWSCloud [label="<<device>>\nAWSCloud" fillcolor=lightyellow shape=box3d style=filled]
	TrainingEnvironment [label="<<device>>\nTrainingEnvironment" fillcolor=lightyellow shape=box3d style=filled]
	InferenceEnvironment [label="<<device>>\nInferenceEnvironment" fillcolor=lightyellow shape=box3d style=filled]
	StorageServices [label="<<device>>\nStorageServices" fillcolor=lightyellow shape=box3d style=filled]
	MonitoringServices [label="<<device>>\nMonitoringServices" fillcolor=lightyellow shape=box3d style=filled]
	SageMakerHyperPod [label="<<device>>\nSageMakerHyperPod" fillcolor=lightyellow shape=box3d style=filled]
	P5eCluster [label="<<device>>\nP5eCluster" fillcolor=lightyellow shape=box3d style=filled]
	Trainium2Cluster [label="<<device>>\nTrainium2Cluster" fillcolor=lightyellow shape=box3d style=filled]
	MoETrainingJob [label="<<artifact>>\nMoETrainingJob" fillcolor=lightcyan shape=note style=filled]
	ValidationJob [label="<<artifact>>\nValidationJob" fillcolor=lightcyan shape=note style=filled]
	Inf2Cluster [label="<<device>>\nInf2Cluster" fillcolor=lightyellow shape=box3d style=filled]
	ElastiCacheCluster [label="<<device>>\nElastiCacheCluster" fillcolor=lightyellow shape=box3d style=filled]
	APIGatewayService [label="<<device>>\nAPIGatewayService" fillcolor=lightyellow shape=box3d style=filled]
	LambdaFunctions [label="<<device>>\nLambdaFunctions" fillcolor=lightyellow shape=box3d style=filled]
	MoEInferenceService [label="<<artifact>>\nMoEInferenceService" fillcolor=lightcyan shape=note style=filled]
	S3Buckets [label="<<device>>\nS3Buckets" fillcolor=lightyellow shape=box3d style=filled]
	FSxLustreFileSystem [label="<<device>>\nFSxLustreFileSystem" fillcolor=lightyellow shape=box3d style=filled]
	TrainingDataBucket [label="<<artifact>>\nTrainingDataBucket" fillcolor=lightcyan shape=note style=filled]
	ModelArtifactsBucket [label="<<artifact>>\nModelArtifactsBucket" fillcolor=lightcyan shape=note style=filled]
	ExpertWeightsBucket [label="<<artifact>>\nExpertWeightsBucket" fillcolor=lightcyan shape=note style=filled]
	CloudWatchService [label="<<device>>\nCloudWatchService" fillcolor=lightyellow shape=box3d style=filled]
	GrafanaDashboards [label="<<device>>\nGrafanaDashboards" fillcolor=lightyellow shape=box3d style=filled]
	PrometheusMetrics [label="<<device>>\nPrometheusMetrics" fillcolor=lightyellow shape=box3d style=filled]
	AWSCloud -> TrainingEnvironment [label=""]
	AWSCloud -> InferenceEnvironment [label=""]
	AWSCloud -> StorageServices [label=""]
	AWSCloud -> MonitoringServices [label=""]
	TrainingEnvironment -> SageMakerHyperPod [label=""]
	SageMakerHyperPod -> P5eCluster [label=deploys]
	SageMakerHyperPod -> Trainium2Cluster [label=deploys]
	P5eCluster -> MoETrainingJob [label=executes]
	Trainium2Cluster -> ValidationJob [label=executes]
	InferenceEnvironment -> Inf2Cluster [label=""]
	InferenceEnvironment -> ElastiCacheCluster [label=""]
	InferenceEnvironment -> APIGatewayService [label=""]
	InferenceEnvironment -> LambdaFunctions [label=""]
	Inf2Cluster -> MoEInferenceService [label=hosts]
	MoEInferenceService -> MoERouter [label=includes]
	MoEInferenceService -> AttentionMechanism [label=includes]
	StorageServices -> S3Buckets [label=""]
	StorageServices -> FSxLustreFileSystem [label=""]
	S3Buckets -> TrainingDataBucket [label=""]
	S3Buckets -> ModelArtifactsBucket [label=""]
	S3Buckets -> ExpertWeightsBucket [label=""]
	MonitoringServices -> CloudWatchService [label=""]
	MonitoringServices -> GrafanaDashboards [label=""]
	MonitoringServices -> PrometheusMetrics [label=""]
	MoETrainingJob -> FSxLustreFileSystem [label="reads from"]
	MoETrainingJob -> ModelArtifactsBucket [label="writes to"]
	MoEInferenceService -> ElastiCacheCluster [label="caches experts in"]
	MoEInferenceService -> ExpertWeightsBucket [label="loads from"]
	APIGatewayService -> LambdaFunctions [label=invokes]
	LambdaFunctions -> MoEInferenceService [label=calls]
}
