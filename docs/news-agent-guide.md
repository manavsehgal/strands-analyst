# News Agent User Guide

The News Agent fetches and analyzes RSS feeds to provide intelligent summaries and insights about the latest news content from various sources.

## Overview

The News Agent is designed to:
- üì∞ **Fetch RSS feeds** from news sites and blogs
- ü§ñ **Analyze content** using AI to provide meaningful summaries
- üìÑ **Save results** as organized markdown files with metadata
- ‚öôÔ∏è **Configure limits** to control the number of items processed

## Quick Start

### Basic Usage

```bash
# Analyze BBC News RSS feed
news http://feeds.bbci.co.uk/news/rss.xml

# Analyze with specific item count
news http://feeds.bbci.co.uk/news/rss.xml --count 5

# Show detailed metrics
news http://feeds.bbci.co.uk/news/rss.xml --verbose
```

### Common RSS Feed URLs

```bash
# Major News Sources
news http://feeds.bbci.co.uk/news/rss.xml                    # BBC News
news http://rss.cnn.com/rss/edition.rss                     # CNN
news https://feeds.npr.org/1001/rss.xml                     # NPR
news https://rss.nytimes.com/services/xml/rss/nyt/HomePage.xml  # NY Times

# Tech News
news https://feeds.feedburner.com/techcrunch                # TechCrunch
news https://feeds.arstechnica.com/arstechnica/index         # Ars Technica
news https://www.theverge.com/rss/index.xml                 # The Verge
```

## Command Options

### Required Arguments

- **`rss_url`** - The RSS feed URL to analyze
  ```bash
  news http://feeds.bbci.co.uk/news/rss.xml
  ```

### Optional Flags

#### Content Control
- **`--count, -c`** - Number of news items to fetch
  ```bash
  news http://feeds.bbci.co.uk/news/rss.xml --count 10
  ```

#### Output Options
- **`--verbose, -v`** - Show detailed analysis metrics
  ```bash
  news http://feeds.bbci.co.uk/news/rss.xml --verbose
  ```

- **`--save-markdown`** - Save results as markdown file
  ```bash
  news http://feeds.bbci.co.uk/news/rss.xml --save-markdown
  ```

- **`--no-markdown`** - Disable markdown saving (overrides config default)
  ```bash
  news http://feeds.bbci.co.uk/news/rss.xml --no-markdown
  ```

- **`--output-dir, -o`** - Specify output directory for markdown files
  ```bash
  news http://feeds.bbci.co.uk/news/rss.xml --output-dir ./news-reports
  ```

## Configuration

The News Agent can be configured in `config.yml`:

```yaml
rss:
  default_items: 10        # Default number of items to fetch
  max_items: 50           # Maximum allowed items per request
  save_markdown: true     # Auto-save as markdown
  output_dir: "./news"    # Default output directory

bedrock:
  agents:
    news:
      temperature: 0.4        # Slightly varied for news summaries
      max_tokens: 4096       # Sufficient for news analysis
      streaming: true        # Enable streaming responses
```

## Output Examples

### Terminal Output
```bash
$ news http://feeds.bbci.co.uk/news/rss.xml --count 5

# Latest News from BBC

## Top Stories Today

1. **Breaking: Major Political Development**
   Summary of the key political news with context and implications...

2. **Economic Update: Market Trends**
   Analysis of recent market movements and economic indicators...

[Additional news items...]

üìä Analysis Metrics:
- Items processed: 5
- Response tokens: 2,847
- Processing time: 3.2s
```

### Saved Markdown File
When `--save-markdown` is used, files are saved as:
```
./news/bbc-co-news-2024-09-02.md
```

With content structure:
```markdown
---
rss_url: http://feeds.bbci.co.uk/news/rss.xml
domain: bbc.co.uk
analyzed_on: 2024-09-02T14:30:00
analysis_type: news_analysis
---

# News Analysis: bbc.co.uk

**RSS Feed:** http://feeds.bbci.co.uk/news/rss.xml  
**Analyzed on:** September 2, 2024

## Latest News

[AI-generated analysis and summaries]

---
*Generated by Strands Analyst*
```

## Advanced Usage

### Batch Processing Multiple Feeds

```bash
# Process multiple feeds with different configurations
news http://feeds.bbci.co.uk/news/rss.xml --count 5 --save-markdown
news https://feeds.feedburner.com/techcrunch --count 10 --output-dir ./tech-news
news https://rss.nytimes.com/services/xml/rss/nyt/HomePage.xml --verbose --no-markdown
```

### Integration with Scripts

```bash
#!/bin/bash
# Daily news collection script

NEWS_DIR="./daily-news/$(date +%Y-%m-%d)"
mkdir -p "$NEWS_DIR"

# Collect from multiple sources
news http://feeds.bbci.co.uk/news/rss.xml --count 5 --output-dir "$NEWS_DIR"
news https://feeds.feedburner.com/techcrunch --count 5 --output-dir "$NEWS_DIR"
news https://feeds.npr.org/1001/rss.xml --count 5 --output-dir "$NEWS_DIR"

echo "Daily news collection completed in $NEWS_DIR"
```

## Programmatic Usage

### Using the Agent Directly

```python
from analyst.agents import create_news_agent, news

# Create agent
agent = create_news_agent()

# Analyze RSS feed
result = news(
    rss_url="http://feeds.bbci.co.uk/news/rss.xml",
    max_items=10,
    agent=agent,
    save_markdown=True,
    output_dir="./my-news"
)

print(f"Analysis result: {result}")
```

### Custom Configuration

```python
from analyst.agents import create_news_agent, news
from analyst.config import get_config

# Get current configuration
config = get_config()

# Analyze with custom settings
result = news(
    rss_url="https://feeds.feedburner.com/techcrunch",
    max_items=config.get_rss_max_items(),  # Use maximum allowed
    save_markdown=True
)
```

## Troubleshooting

### Common Issues

1. **RSS Feed Not Accessible**
   ```
   Error processing RSS feed: HTTP 404 Not Found
   ```
   - Verify the RSS URL is correct and accessible
   - Some feeds require specific user agents or headers

2. **Network Timeouts**
   ```
   Error processing RSS feed: Connection timeout
   ```
   - Check internet connectivity
   - Some RSS feeds may be slow to respond

3. **Invalid RSS Format**
   ```
   Error: Unable to parse RSS content
   ```
   - Ensure the URL points to a valid RSS/XML feed
   - Not all news sites provide RSS feeds

### Debugging Steps

1. **Test RSS URL manually**
   ```bash
   curl -I http://feeds.bbci.co.uk/news/rss.xml
   ```

2. **Use verbose mode for details**
   ```bash
   news http://feeds.bbci.co.uk/news/rss.xml --verbose
   ```

3. **Check configuration**
   ```bash
   # View current RSS settings
   python -c "from analyst.config import get_config; config = get_config(); print(f'Default items: {config.get_rss_default_items()}, Max: {config.get_rss_max_items()}')"
   ```

## Tips and Best Practices

### RSS Feed Discovery
- Look for RSS icons (üî∂) on news websites
- Check `/rss`, `/feed`, or `/rss.xml` paths
- Use feed discovery tools to find RSS URLs

### Performance Optimization
- Use `--count` to limit items for faster processing
- Save markdown files for offline reading and archival
- Use `--verbose` sparingly as it increases processing time

### Content Organization
- Use meaningful output directories: `--output-dir ./news/$(date +%Y-%m)`
- Save different sources to separate directories
- Use consistent naming conventions for batch processing

## Related Commands

- **[sitemeta](sitemeta-guide.md)** - Analyze website metadata and purpose
- **[article](article-agent-guide.md)** - Download and analyze individual articles
- **[htmlmd](htmlmd-agent-guide.md)** - Convert saved HTML to markdown

For more information about the underlying architecture, see the [Agents Guide](agents-guide.md) and [Tools Guide](tools-guide.md).